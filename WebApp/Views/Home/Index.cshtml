@model WebApp.ViewModels.DashboardViewModel
@{
    Layout = "_DashboardLayout";
    ViewData["Title"] = "Dashboard";
}

<!-- Summary Cards -->
<div class="dashboard-summary">
    <div class="summary-card">
        <div class="summary-icon blue">📄</div>
        <div class="summary-content">
            <div class="summary-label">Khóa học đang hoạt động</div>
            <div class="summary-value">@Model.ActiveCourses</div>
        </div>
    </div>
    <div class="summary-card">
        <div class="summary-icon green">👥</div>
        <div class="summary-content">
            <div class="summary-label">Tổng sinh viên</div>
            <div class="summary-value">@Model.TotalStudents</div>
        </div>
    </div>
    <div class="summary-card">
        <div class="summary-icon blue">✓</div>
        <div class="summary-content">
            <div class="summary-label">Bài tập đang chờ</div>
            <div class="summary-value">@Model.PendingAssignments</div>
        </div>
    </div>
    <div class="summary-card">
        <div class="summary-icon yellow">💬</div>
        <div class="summary-content">
            <div class="summary-label">Tin nhắn chưa đọc</div>
            <div class="summary-value">@Model.UnreadMessages</div>
        </div>
    </div>
    <div class="summary-card">
        <div class="summary-icon purple">🏫</div>
        <div class="summary-content">
            <div class="summary-label">Khoa / Bộ môn</div>
            <div class="summary-value">@Model.Departments.Count()</div>
        </div>
    </div>
</div>

<!-- Department & Instructor Overview -->
<div class="entity-grid">
    @foreach (var dept in Model.Departments)
    {
        <div class="entity-card">
            <div class="entity-header">
                <h4>@dept.Name</h4>
                <span class="entity-faculty">@dept.Faculty</span>
            </div>
            <div class="entity-meta">
                <div><strong>@dept.StudentCount</strong> sinh viên</div>
                <div><strong>@dept.CourseCount</strong> khoá học</div>
                <div class="text-muted small">Văn phòng: @dept.Office</div>
            </div>
        </div>
    }
</div>

<!-- Middle Section -->
<div class="dashboard-middle">
    <div class="dashboard-panel">
        <div class="panel-header">
            <h3>Thống kê khóa học</h3>
            <select class="form-select form-select-sm" style="width: auto;">
                <option>7 ngày qua</option>
                <option>30 ngày qua</option>
                <option>3 tháng qua</option>
            </select>
        </div>
        <div class="panel-body">
            <div class="empty-state">Chưa có dữ liệu thống kê</div>
        </div>
    </div>
    
    <div class="dashboard-panel">
        <div class="panel-header">
            <h3>Hoạt động gần đây</h3>
        </div>
        <div class="panel-body">
            <div class="activity-list">
                @foreach (var activity in Model.RecentActivities)
                {
                    <div class="activity-item">
                        <span class="activity-action">@activity.Action</span>
                        <span class="activity-time">@activity.Timestamp.ToString("dd/MM/yyyy HH:mm")</span>
                    </div>
                }
            </div>
        </div>
    </div>
</div>

<!-- Courses & Classes -->
<div class="two-column-layout">
    <div class="dashboard-panel">
        <div class="panel-header">
            <h3>Khoá học tiêu biểu</h3>
            <a asp-controller="Courses" asp-action="Index" class="view-all-link">Quản lý khoá học</a>
        </div>
        <div class="panel-body">
            <div class="course-list">
                @foreach (var course in Model.Courses.Take(5))
                {
                    <div class="course-item">
                        <div>
                            <div class="fw-semibold">@course.CourseCode - @course.Title</div>
                            <div class="text-muted small">@course.Department</div>
                        </div>
                        <div class="badge bg-light text-dark">@course.Credits tín chỉ</div>
                    </div>
                }
            </div>
        </div>
    </div>
    <div class="dashboard-panel">
        <div class="panel-header">
            <h3>Lớp học / Section</h3>
        </div>
        <div class="panel-body">
            <div class="class-list">
                @foreach (var cls in Model.Classes.Take(5))
                {
                    <div class="class-item">
                        <div class="fw-semibold">@cls.Name</div>
                        <div class="text-muted small">@cls.Semester - @cls.AcademicYear</div>
                        <div class="text-muted small">@cls.Instructor</div>
                        <div class="text-muted small">@cls.Schedule</div>
                    </div>
                }
            </div>
        </div>
    </div>
</div>

<!-- Enrollment & Grade Insights -->
<div class="two-column-layout">
    <div class="dashboard-panel">
        <div class="panel-header">
            <h3>Trạng thái ghi danh</h3>
        </div>
        <div class="panel-body">
            <div class="status-list">
                @foreach (var status in Model.EnrollmentStatuses)
                {
                    <div class="status-item">
                        <span>@status.Status</span>
                        <strong>@status.Count</strong>
                    </div>
                }
            </div>
        </div>
    </div>
    <div class="dashboard-panel">
        <div class="panel-header">
            <h3>Phân bố điểm</h3>
        </div>
        <div class="panel-body">
            <div class="status-list">
                @foreach (var grade in Model.Grades)
                {
                    <div class="status-item">
                        <span>Xếp loại @grade.Grade</span>
                        <strong>@grade.Count</strong>
                    </div>
                }
            </div>
        </div>
    </div>
</div>

<!-- Accounts Summary -->
<div class="dashboard-panel">
    <div class="panel-header">
        <h3>Tài khoản người dùng</h3>
    </div>
    <div class="panel-body">
        <div class="status-list">
            @foreach (var account in Model.Accounts)
            {
                <div class="status-item">
                    <span>@account.Role</span>
                    <strong>@account.Count</strong>
                </div>
            }
        </div>
    </div>
</div>

<!-- Deadline Section -->
<div class="dashboard-panel">
    <div class="panel-header">
        <h3>Deadline sắp tới</h3>
        <a href="#" class="view-all-link">Xem tất cả</a>
    </div>
    <div class="panel-body">
        <table class="table table-hover">
            <thead>
                <tr>
                    <th>KHÓA HỌC</th>
                    <th>BÀI TẬP</th>
                    <th>HẠN NỘP</th>
                    <th>TRẠNG THÁI</th>
                    <th>HÀNH ĐỘNG</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td colspan="5" class="text-center text-muted">Chưa có deadline nào</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
